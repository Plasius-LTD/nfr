# AGENTS

## Purpose
This repo provides `@plasius/nfr`, a typed NFR framework for analytics, telemetry, and performance signals (React-friendly).

## Key paths
- `src/telemetry/AnalyticsProvider.tsx`: provider + context wiring
- `src/telemetry/analytics.ts`: core tracking helpers and guards
- `src/telemetry/withInteractionTracking.tsx`: HOC for interaction tracking
- `src/performance/webVitals.ts`: optional web-vitals integration
- `src/index.ts`: package exports
- `tests/`: vitest tests (jsdom)
- `dist/`: build output (generated by tsup)

## Commands
- Build: `npm run build`
- Tests: `npm test`
- Test watch: `npm run test:watch`
- Lint: `npm run lint`
- Clean: `npm run clean`

## Development notes
- `web-vitals` is an optional peer dependency; keep dynamic/guarded imports and SSR-safe paths.
- Keep React hooks and providers compatible with `react@^19`.
- Avoid heavy work at import time; prefer lazy initialization.

## Conventions
- Use Conventional Commits (see `CONTRIBUTING.md`).
- Update `README.md` and `CHANGELOG.md` for user-facing changes.
- Avoid editing `dist/` or `coverage/` by hand.

## AI guidance
- After any change, run relevant BDD/TDD tests when they exist; mention if skipped.
- For fixes, add/update a BDD or TDD test that fails first and validate it passes after the fix when possible.
- When adding or updating dependencies, prefer lazy-loading (dynamic import/code splitting) to avoid heavy first-load network use when applicable.
